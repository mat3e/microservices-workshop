<!DOCTYPE html>
<html>

<head>
    <meta name="description" content="Presentation">
    <meta name="keywords" content="presentation">
    <meta name="author" content="mat3e">
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/blood.css">
    <link rel="stylesheet" href="css/idea.css">
    <link rel="stylesheet" href="css/fontawesome.css">
    <style>
        #header-margin {
            text-align: left;
            border-left: solid .25em white;
            line-height: .85;
            padding-left: .25em;
        }

        #header-logo {
            width: 375px;
            height: 80px;
            background-image: url('img/twitter.png');
            background-size: contain;
            top: -4em;
            right: 0;
            position: absolute;
        }

        .reveal .slides section .about-me {
            padding: 1em;
            background-color: rgba(255, 255, 255, .75);
            list-style-type: none;
            margin-left: 0;
            float: left;
        }

        .reveal .slides section .about-me ul {
            list-style-type: none;
            float: left;
            margin-left: 0;
        }

        .reveal .slides section .about-me a {
            color: #a23;
        }

        .reveal .slides section .about-me a:hover {
            color: #dd5566;
        }

        .slides section img.pure-img {
            border: none;
            box-shadow: none;
            background: none;
            margin: 0;
        }

        code[contenteditable="true"] {
            border: 0;
            outline: 0;
        }

        #perspective a {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            width: 45%;
            margin: 0 auto;
        }

        #perspective a img {
            border: 0;
            margin: 0;
            box-shadow: none;
        }

        .slides section pre {
            margin-bottom: 0;
        }

        .slides section pre+button {
            cursor: pointer;

            font-size: .65em;
            font-weight: 100;
            -webkit-font-smoothing: antialiased;

            color: white;
            background: rgb(175, 30, 35);

            padding: 0 3px 3px 3px;
            border: transparent;
            border-radius: 4px;

            display: block;
            margin: 0 auto;
        }

        .slides section pre+button:disabled {
            background-color: grey;
        }

        .slides section a .stripped-img {
            border: none;
            margin: 0;
            box-shadow: none;
            background-color: rgba(255, 255, 255, 0);
        }

        .slides section a .stripped-img:hover {
            border: none;
            margin: 0;
            box-shadow: none;
            background-color: rgba(255, 255, 255, 0);
        }

        .slides section .comment {
            margin-top: -20px;
            margin-bottom: 20px;
            color: gray;
        }

        .reveal .slides section .fragment.replace {
            transition: none;
            display: inline-block;
        }

        .reveal .slides section .fragment.fade-out.visible.replace {
            display: none;
        }

        .reveal .slides section .fragment.fade-in.replace {
            display: none;
        }

        .reveal .slides section .fragment.fade-in.visible.replace {
            display: inline-block;
        }

        .reveal .slides section .fragment.highlight-red.visible {
            color: #dd5566;
        }

        #hook-here button {
            padding: 1em;
            border-radius: 0;
            background-color: white;
            border: 1px solid black;
        }

        .reveal .slides section td.long-text-cell {
            font-size: .5em;
            vertical-align: middle;
        }

        .reveal .slides section table.summary {
            table-layout: fixed;
            width: 100%;
        }

        .reveal .slides section table.summary th {
            text-align: center;
        }

        .reveal .slides section table.summary tbody td,
        .reveal .slides section table.summary th {
            width: 33%;
        }

        .reveal .slides section table.summary tbody td:first-child,
        .reveal .slides section table.summary th:first-child {
            width: 7%;
            vertical-align: middle;
            text-align: center
        }

        .reveal .slides section .fragment.no-highlight.visible {
            color: #eee;
        }

        .reveal .slides section .fragment.no-highlight {
            opacity: 1;
            visibility: inherit;
        }

        .reveal .slides section .centered {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .reveal .slides section .monolith {
            background-image: url('img/monolith-bg.png');
            background-repeat: no-repeat;
            background-size: contain;
            width: 640px;
        }

        .reveal .slides section .monolith td {
            vertical-align: middle;
            text-align: center;
            border: none;
            height: 200px;
            font-size: .85em;
        }
    </style>
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section data-background-image>
                <section data-background-image>
                    <div id="header-margin">
                        <h1 style="margin: 0; font-size: 2.25em">Architektura mikroserwis√≥w</h1>
                        <h2 style="font-size: 1.5em">REST, CQRS, NoSQL</h2>
                    </div>
                    <div id="header-logo"></div>
                </section>
                <section data-background-image="img/bg-hd.jpg" data-background-transition="zoom">
                    <ul class="about-me">
                        <li>
                            <ul style="padding: 0">
                                <li>
                                    <a href="https://www.linkedin.com/in/mateusz-chrzonstowski/">
                                        <i class="fab fa-linkedin"
                                            style="color: #0077B5; background-color: #FFF; line-height: .75em"></i>
                                        /mateusz-chrzonstowski
                                    </a>
                                </li>
                                <li>
                                    <a href="https://twitter.com/_mat3e_">
                                        <i class="fab fa-twitter-square"
                                            style="background-color: #1DA1F2; color: #FFF; line-height: .75em"></i>
                                        /_mat3e_
                                    </a>
                                </li>
                                <li>
                                    <a href="https://www.reddit.com/user/_mat3e_">
                                        <i class="fab fa-reddit-square"
                                            style="background-color: #FF4500; color: #FFF; line-height: .75em"></i>
                                        /_mat3e_
                                    </a>
                                </li>
                                <li>
                                    <a href="https://github.com/mat3e/">
                                        <i class="fab fa-github-square"
                                            style="color: #24292E; background-color: #FFF; line-height: .75em"></i>
                                        /mat3e
                                    </a>
                                </li>
                                <li style="line-height: 1">&nbsp;</li>
                                <li class="fragment" style="line-height: .75">
                                    <a style="font-size: .7em; font-weight: bold;"
                                        href="https://mat3e.github.io/microservices-workshop/gigacon.html">
                                        mat3e.github.io
                                        <div style="padding-left: .5em;">
                                            /microservices-workshop/gigacon
                                        </div>
                                    </a>
                                </li>
                                <li style="line-height: 1">&nbsp;</li>
                            </ul>
                        </li>
                        <li>
                            <ul class="fragment" style="padding: .1em; line-height: 1">
                                <li>
                                    <a href="https://www.udemy.com/fajny-javascript/?couponCode=OPENALL">
                                        <img src="img/udemy.svg" class="pure-img" style="height: 1.5em;">
                                    </a>
                                </li>
                                <li>
                                    <a href="https://allegro.tech/about-us/">
                                        <img src="img/allegro-tech.svg" class="pure-img" style="height: 1.5em;">
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </section>
                <section data-background-image="img/meet.jpg" data-background-color="#fff"
                    data-background-size="contain">
                    <h2 style="margin-top: -3em">Poznajmy siƒô</h2>
                    <aside class="notes">
                        <ul>
                            <li>nazwiska</li>
                            <li>kto w czym programowa≈Ç, do≈õwiadczenie z mikroserwisami</li>
                            <li>oczekiwania do warsztatu</li>
                            <li>ulubiony alkohol</li>
                        </ul>
                        Kto Java? Kto Spring? Kto zna dobrze Springa?
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 1 - modularny monolit</h2>
                    <ol>
                        <li class="fragment" data-fragment-index="1"><span class="fragment highlight-red"
                                data-fragment-index="5">Dobre praktyki w projektowaniu i implementacji REST API</span>
                        </li>
                        <li class="fragment" data-fragment-index="2">Techniki i frameworki pozwalajƒÖce skalowaƒá systemy
                            rozproszone
                        </li>
                        <li class="fragment" data-fragment-index="3">PrzeglƒÖd baz danych NoSQL, zastosowanie i u≈ºycie w
                            mikroserwisach
                        </li>
                        <li class="fragment" data-fragment-index="4">CQRS i Event Sourcing</li>
                    </ol>
                </section>
                <section>
                    <h2>Jak to monolit?</h2>
                    <table class="monolith">
                        <tbody>
                            <tr>
                                <td class="fragment" data-fragment-index="3">Modularny monolit</td>
                                <td class="fragment" data-fragment-index="2">Mikroserwisy</td>
                            </tr>
                            <tr>
                                <td class="fragment" data-fragment-index="1">Monolit</td>
                                <td class="fragment" data-fragment-index="4">Rozproszony monolit</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h2>Rozgrzewka</h2>
                    <div class="fragment">
                        Uruchomiƒá Mongo:
                        <pre style="margin: 0; width: 100%">
                        <code>docker run -d -p 27017-27019:27017-27019 --name microservices mongo</code>
                        </pre>
                    </div>
                    <p class="fragment" style="font-size: .75em">Potem i tak siƒô przyda</p>
                </section>
                <section>
                    <h2>REST, serwisy?</h2>
                    <img src="img/alone.gif" style="width: 50%" class="pure-img fragment">
                </section>
                <section data-background-image="img/system.gif" data-background-size="contain">
                    <aside class="notes">Nawet niemodularny monolit bƒôdzie rozmawia≈Ç z innymi systemami -
                        ≈ÇƒÖczenie/logowanie siƒô przez fejsa, wys≈Çanie maila
                    </aside>
                </section>
                <section data-background-image="img/http.png" data-background-size="contain">
                    <aside class="notes">Codzienne u≈ºycie - wklepujemy co≈õ i ju≈º ≈õmigamy po HTTP</aside>
                </section>
                <section>
                    <h2>HTTP - 1/2</h2>
                    <ul>
                        <li class="fragment">W internetach HTTP jest wszechobecne!</li>
                        <li class="fragment">NajpopularniejszƒÖ metodƒÖ protoko≈Çu HTTP jest GET<span class="fragment">; sƒÖ
                                jeszcze inne (PUT, POST, DELETE, ...)</span>
                        </li>
                        <li class="fragment">PrzeglƒÖdarka wysy≈Ça ≈ºƒÖdanie (request) HTTP GET pod adres, np.
                            <i>google.pl</i>
                        </li>
                        <li class="fragment">W odpowiedzi (response) dostajemy jakiego≈õ¬†tam HTML-a - naszƒÖ
                            stronƒô
                        </li>
                        <li class="fragment">Strona dociƒÖga kolejne rzeczy, kolejnymi requestami: obrazek, JS-a, JSON-a,
                            XML-a, ...
                        </li>
                    </ul>
                    <aside class="notes">
                        HTTP - Hypertext Transfer Protocol; HTML - HyperText Markup Language
                    </aside>
                </section>
                <section>
                    <h2>HTTP - 2/2</h2>
                    <ul>
                        <li class="fragment">Mamy jaki≈õ kod na serwerze, wystawiony po HTTP</li>
                        <li class="fragment">Klienty odpytujƒÖ naszƒÖ aplikacjƒô.
                            <span class="fragment">Klienty?</span>
                            <ul>
                                <li class="fragment">Front-end w przeglƒÖdarce na kompie</li>
                                <li class="fragment">Front-end w przeglƒÖdarka na smartfonie</li>
                                <li class="fragment">Apka na smartfonie</li>
                                <li class="fragment">Inne aplikacje serwerowe (mikroserwisy)</li>
                            </ul>
                        </li>
                    </ul>
                    <aside class="notes">Mo≈ºna tutaj narysowaƒá klient-server i jakie≈õ¬†parametery - req, resp</aside>
                </section>
                <section>
                    <span class="fragment fade-out replace" data-fragment-index="1"><img src="img/evo/1.png"
                            class="pure-img"></span>
                    <span class="fragment fade-out replace" data-fragment-index="2">
                        <img src="img/evo/2.png" class="pure-img fragment fade-in replace" data-fragment-index="1">
                    </span>
                    <span class="fragment fade-in replace" data-fragment-index="2"><img src="img/evo/3.png"
                            class="pure-img"></span>
                    <aside class="notes">
                        Najwiƒôkszy problem - brak dokumentacji, wiƒôc szukano rozwiƒÖza≈Ñ (WADL, RAML,
                        RSDL, swagger)
                        <br>
                        REST = architektura, a o HATEOAS te≈º za chwilƒô
                    </aside>
                </section>
                <section>
                    <h2>REST</h2>
                    <ul>
                        <li class="fragment">REpresentational State Transfer</li>
                        <li class="fragment">Zmiana stanu poprzez reprezentacje</li>
                        <li class="fragment">Odwo≈Çujemy siƒô¬†do ≈∫r√≥de≈Ç/zasob√≥w/rzeczownik√≥w, np. host/api/customers</li>
                        <li class="fragment">Deklaratywnie - taki stan chcemy osiƒÖgnƒÖƒá
                            <ul>
                                <li class="fragment">Jak? Robota serwera</li>
                            </ul>
                        </li>
                        <li class="fragment">Mocne wykorzystanie HTTP</li>
                        <li class="fragment">Architektura - og√≥lne wytyczne</li>
                    </ul>
                    <aside class="notes">
                        Wchodzimy w "miƒôcho", co≈õ o zasadach, wytycznych; liczba mnoga i id na ko≈Ñcu adresu
                    </aside>
                </section>
                <section>
                    <h2>G≈Ç√≥wne metody</h2>
                    <ul>
                        <li class="fragment" data-fragment-index="1"><code>GET</code> <span class="fragment"
                                data-fragment-index="2">- dej mie to</span>
                        </li>
                        <li class="fragment" data-fragment-index="3"><code>POST</code> <span class="fragment"
                                data-fragment-index="4">- we≈∫ to</span>
                        </li>
                        <li class="fragment" data-fragment-index="5"><code>PUT</code> <span class="fragment"
                                data-fragment-index="7">- podmie≈Ñ to</span>
                        </li>
                        <li class="fragment" data-fragment-index="6"><code>PATCH</code> <span class="fragment">-
                                zaktualizuj
                                to</span></li>
                        <li class="fragment"><code>DELETE</code> <span class="fragment">- usu≈Ñ to</span></li>
                        <li class="fragment">OPTIONS, HEAD, TRACE</li>
                    </ul>
                    <aside class="notes">
                        Kt√≥ra metoda ma body, kt√≥ra nie
                        <br>
                        <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/TRACE">TRACE</a>
                    </aside>
                </section>
                <section>
                    <h2>CRUD</h2>
                    <div>
                        <img src="img/wiki.png" class="pure-img">
                    </div>
                    <ul>
                        <li class="fragment">
                            <a
                                href="https://sekurak.pl/banalny-0-day-w-phpmyadminie-przy-pewnych-warunkach-atakujacy-moze-kasowac-cale-bazy-danych/">Usuwanie
                                GET-em w phpMyAdmin</a>
                        </li>
                        <li class="fragment">
                            <a href="https://medium.com/@sansyrox/hacking-tinders-premium-model-43f9f699d44">Lajkowanie
                                GET-em na Tinderze</a>
                        </li>
                    </ul>
                    <aside class="notes">
                        Nic nowego, jak chcemy kogo≈õ obraziƒá w IT, to m√≥wimy "piszesz tylko CRUD-y", ale wciƒÖ≈º tego nie
                        ogarniajƒÖ
                    </aside>
                </section>
                <section>
                    <h2 style="margin: 0">Rodzaje metod</h2>
                    <ol>
                        <li class="fragment">Bezpieczne = nie modyfikujƒÖ ≈∫r√≥de≈Ç; mo≈ºna prefetchowaƒá, cache'owaƒá
                            <ul>
                                <li class="fragment">OPTIONS, GET, HEAD</li>
                            </ul>
                        </li>
                        <li class="fragment">Idempotentne = zawsze ten sam wynik
                            <ul>
                                <li class="fragment"><code>a=4</code> vs. <code>a++</code></li>
                                <li class="fragment">W teorii: OPTIONS, GET, HEAD, PUT, DELETE</li>
                                <li class="fragment">W praktyce: PATCH - czƒôsto, DELETE - r√≥≈ºnie</li>
                                <li class="fragment">POST - nigdy</li>
                            </ul>
                        </li>
                    </ol>
                    <a class="fragment" href="http://restcookbook.com/HTTP%20Methods/idempotency/">restcookbook</a>
                </section>
                <section>
                    <h2>statusy odpowiedzi</h2>
                    <table class="statuses">
                        <tbody style="font-size: .85em">
                            <tr>
                                <td style="border-right: solid 1px">
                                    <ul>
                                        <li class="fragment"><a href="https://http.cat/100">100 Continue</a></li>
                                    </ul>
                                </td>
                                <td>
                                    <ul>
                                        <li class="fragment"><a href="https://http.cat/200">200 OK</a></li>
                                        <li class="fragment"><a href="https://http.cat/201">201 Created</a></li>
                                        <li class="fragment"><a href="https://http.cat/204">204 No Content</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td style="border-right: solid 1px">
                                    <ul>
                                        <li class="fragment"><a href="https://http.cat/301">301 Moved Permanently</a>
                                        </li>
                                        <li class="fragment"><a href="https://http.cat/302">302 Found</a></li>
                                        <li class="fragment"><a href="https://http.cat/304">304 Not Modified</a></li>
                                    </ul>
                                </td>
                                <td>
                                    <ul>
                                        <li class="fragment"><a href="https://http.cat/400">400 Bad Request</a></li>
                                        <li class="fragment"><a href="https://http.cat/401">401 Unauthorized</a></li>
                                        <li class="fragment"><a href="https://http.cat/404">404 Not Found</a></li>
                                        <li class="fragment"><a href="https://http.cat/405">405 Method Not Allowed</a>
                                        </li>
                                        <li class="fragment"><a href="https://http.cat/418">418 I‚Äôm a teapot</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align: center">
                                    <ul>
                                        <li class="fragment"><a href="https://http.cat/500">500 Internal Server
                                                Error</a>
                                        </li>
                                        <li class="fragment"><a href="https://http.cat/503">503 Service Unavailable</a>
                                        </li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <aside class="notes">
                        http.cat
                        <ul>
                            <li>informacyjne</li>
                            <li>powodzenia</li>
                            <li>przekierowania</li>
                            <li>b≈ÇƒÖd klienta</li>
                            <li>b≈ÇƒÖd serwera</li>
                            <li>302 - tymczasowo gdzie indziej</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <img src="img/ppap.gif">
                    <div class="fragment">
                        <a href="https://www.restapitutorial.com/lessons/httpmethods.html">REST API Tutorial</a>
                    </div>
                    <aside class="notes">
                        Po≈ÇƒÖczenie wiedzy o metodach i statusach; CRUD v2
                        <br>
                        Otworzyƒá i tutaj dyskusja - jak nie znamy listy dostƒôpnych URL-i, to co zwracaƒá
                        dla collection/id? 404? Wtedy nie ma collection, czy zasobu id? PRAGMATYZM
                        <br>
                        204 - ok w PUT, jak wiemy, co zaktualizowane (za≈Ço≈ºony stan osiƒÖgniƒôty)
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2>ƒÜwiczenie</h2>
                    <img src="img/structure/1.png" class="pure-img fragment fade-out replace" data-fragment-index="1">
                    <img src="img/structure/2.png" class="pure-img fragment fade-in replace" data-fragment-index="1">
                    <div class="fragment">
                        https://root/api/?
                    </div>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2 style="font-size: 1.5em;">content negotiation</h2>
                    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation">
                        <img src="img/nego.png" style="padding: .5em; background-color: white;">
                    </a>
                </section>
                <section>
                    <h2>
                        <span>query param</span>
                    </h2>
                    <ul>
                        <li class="fragment"><a
                                href="https://duckduckgo.com/?q=mistrz">https://duckduckgo.com/?q=mistrz</a>
                        </li>
                        <li class="fragment">Dla metody GET jedyna szansa, ≈ºeby przes≈Çaƒá jakie≈õ informacje (brak body)
                        </li>
                        <li class="fragment">Mo≈ºliwe te≈º dla innych metod (content negotiation)</li>
                        <li class="fragment">?, &, %20</li>
                    </ul>
                    <div class="fragment" style="margin-top: 1em; width: 100%; overflow: scroll">
                        <table>
                            <tbody>
                                <tr>
                                    <td><code>':'</code></td>
                                    <td><code>'/'</code></td>
                                    <td><code>'?'</code></td>
                                    <td><code>'#'</code></td>
                                    <td><code>'['</code></td>
                                    <td><code>']'</code></td>
                                    <td><code>'@'</code></td>
                                    <td><code>'!'</code></td>
                                    <td><code>'$'</code></td>
                                    <td><code>'&amp;'</code></td>
                                    <td><code>"'"</code></td>
                                    <td><code>'('</code></td>
                                    <td><code>')'</code></td>
                                    <td><code>'*'</code></td>
                                    <td><code>'+'</code></td>
                                    <td><code>','</code></td>
                                    <td><code>';'</code></td>
                                    <td><code>'='</code></td>
                                    <td><code>'%'</code></td>
                                    <td><code>' '</code></td>
                                </tr>
                                <tr>
                                    <td><code>%3A</code></td>
                                    <td><code>%2F</code></td>
                                    <td><code>%3F</code></td>
                                    <td><code>%23</code></td>
                                    <td><code>%5B</code></td>
                                    <td><code>%5D</code></td>
                                    <td><code>%40</code></td>
                                    <td><code>%21</code></td>
                                    <td><code>%24</code></td>
                                    <td><code>%26</code></td>
                                    <td><code>%27</code></td>
                                    <td><code>%28</code></td>
                                    <td><code>%29</code></td>
                                    <td><code>%2A</code></td>
                                    <td><code>%2B</code></td>
                                    <td><code>%2C</code></td>
                                    <td><code>%3B</code></td>
                                    <td><code>%3D</code></td>
                                    <td><code>%25</code></td>
                                    <td><code>%20</code> or <code>+</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <section>
                    <h2>
                        <span>Nag≈Ç√≥wki</span>
                    </h2>
                    <ul>
                        <li class="fragment" data-fragment-index="1">Accept, Content-Type
                            <ul>
                                <li class="fragment" data-fragment-index="2">Typy MIME: application/json, text/plain,
                                    text/html, text/html,
                                    text/css
                                </li>
                            </ul>
                        </li>
                        <li class="fragment" data-fragment-index="3">Cookie</li>
                        <li class="fragment" data-fragment-index="4">Authorization</li>
                    </ul>
                    <h2 class="fragment" data-fragment-index="5">
                        <span>Cia≈Ço</span>
                    </h2>
                    <ul>
                        <li class="fragment" data-fragment-index="5">"Content-Type" opisuje, co jest w ciele</li>
                        <li class="fragment">Cia≈Ço odpowiedzi dopasowane do nag≈Ç√≥wka "Accept" zapytania</li>
                    </ul>
                </section>
                <section>
                    <table>
                        <thead>
                            <tr>
                                <td style="text-align: center; font-weight: bold; width: 50%">SOAP</td>
                                <td style="text-align: center; font-weight: bold; width: 50%">REST</td>
                            </tr>
                        </thead>
                        <tbody style="font-size: .75em;">
                            <tr class="fragment">
                                <td style="width: 50%">Jeden spos√≥b wysy≈Çki</td>
                                <td style="width: 50%">R√≥≈ºne znaczenie metod HTTP</td>
                            </tr>
                            <tr class="fragment">
                                <td>Zachowania (czasowniki)</td>
                                <td>≈πr√≥d≈Ça/zasoby (rzeczowniki)</td>
                            </tr>
                            <tr class="fragment">
                                <td>Niejednoznaczno≈õƒá status√≥w: 404, 200 zamiast 201</td>
                                <td>Statusy odpowiedzi ≈Çatwe w interpretacji</td>
                            </tr>
                            <tr class="fragment">
                                <td>Problemy np. z przekierowaniem</td>
                                <td>Obs≈Çuga przekierowa≈Ñ</td>
                            </tr>
                            <tr class="fragment">
                                <td>Schemat, mo≈ºliwo≈õƒá generowania kodu</td>
                                <td>Brak</td>
                            </tr>
                            <tr class="fragment">
                                <td>XML</td>
                                <td>R√≥≈ºne formaty, g≈Ç√≥wnie JSON</td>
                            </tr>
                            <tr class="fragment">
                                <td>Dojrzalszy, wiadomo, czego siƒô spodziewaƒá</td>
                                <td>Dojrzalszy, je≈õli chodzi o integracjƒô z HTTP</td>
                            </tr>
                            <tr class="fragment">
                                <td>Protok√≥≈Ç</td>
                                <td>Architektura</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h3>Nieustandaryzowane, warte wzmianki</h3>
                    <ul>
                        <li class="fragment">Wersjonowanie</li>
                        <li class="fragment">Stronicowanie</li>
                        <li class="fragment">Szukanie/filtrowanie</li>
                        <li class="fragment"><span class="fragment highlight-red">Dokumentacja/schemat</span></li>
                    </ul>
                    <aside class="notes">
                        Pomys≈Çy jak za≈Çatwiaƒá te rzeczy? Query params?
                        <br>
                        wersje: path - od zawsze, query - domy≈õlnie najnowsze, header, Accept header
                        <br>
                        Jakby by≈Ç jaki≈õ jednoznaczny spos√≥b dokumentacji, to tam by≈õmy okre≈õlali jak szukaƒá itd.
                        Powtarzam siƒô, ale to jest najwiƒôkszy b√≥l
                    </aside>
                </section>
                <section>
                    <h2>Pr√≥by naprawy</h2>
                    <ul>
                        <li class="fragment" data-fragment-index="1">RAML</li>
                        <li class="fragment" data-fragment-index="2">WADL</li>
                        <li class="fragment" data-fragment-index="3">RSDL</li>
                        <li class="fragment" data-fragment-index="4"><span class="fragment highlight-red"
                                data-fragment-index="7">swagger</span></li>
                        <li class="fragment" data-fragment-index="6"><span class="fragment highlight-red"
                                data-fragment-index="7">HATEOAS</span></li>
                    </ul>
                    <br>
                    <img src="img/swagger.png" class="pure-img fragment" data-fragment-index="4">
                    <img src="img/swag.gif" class="pure-img fragment" data-fragment-index="5">
                    <aside class="notes">
                        <ul>
                            <li>RAML ‚Äì RESTful API Modeling Language bazuje na YAML-u</li>
                            <li>
                                WADL ‚Äì Web Application Description Language is a machine-readable XML description of
                                HTTP-based web services. WADL is the REST equivalent of SOAP's Web Services Description
                                Language (WSDL), which can also be used to describe REST web services.
                            </li>
                            <li>
                                RSDL ‚Äì RESTful Service Description Language is a machine- and human-readable XML
                                description of HTTP-based web applications (typically REST web services). Unlike WADL,
                                it concentrates on describing URIs as stand-alone entry points in to the application
                                which can be invoked in different ways, does not require traversing over URI components
                                to figure out URI structure, and supports URI/Headers/body parameters overloads. This
                                makes it human-readable and easily consumed by both humans and machines.
                            </li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>HATEOAS</h2>
                    <pre class="fragment">
                        <code data-trim>
                            <?xml version="1.0"?>
                            <account>
                                <number>12345</number>
                                <balance currency="usd">100.00</balance>
                                <link rel="deposit" href="/accounts/12345/deposit" />
                                <link rel="withdraw" href="/accounts/12345/withdraw" />
                                <link rel="transfer" href="/accounts/12345/transfer" />
                                <link rel="close" href="/accounts/12345/close" />
                            </account>
                        </code>
                    </pre>
                    <a class="fragment" href="https://www.infoq.com/articles/webber-rest-workflow/">How to GET a Cup of
                        Coffee</a>
                    <aside class="notes">
                        Czƒôsto siƒô widzi przyk≈Çady w XML-u; jednak hipermedia
                        <br>
                        Hypermedia as the Engine of Application State
                    </aside>
                </section>
                <section>
                    <h3>GraphQL - nastƒôpny krok?</h3>
                    <div style="display: flex;">
                        <div style="width: 50%">
                            Jak SOAP
                            <hr>
                            <ul>
                                <li class="fragment">Jeden endpoint</li>
                                <li class="fragment">Jedna metoda HTTP</li>
                                <li class="fragment">Schemat</li>
                            </ul>
                        </div>
                        <div style="width: 50%">
                            Jak REST
                            <hr>
                            <ul>
                                <li class="fragment">JSON w odpowiedzi</li>
                                <li class="fragment">Zasoby a nie metody</li>
                                <li class="fragment">Ograniczona lista zachowa≈Ñ
                                    <ul>
                                        <li>Command & Query</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
                <section>
                    <h2>REST/HTTP a Java</h2>
                    <ul>
                        <li class="fragment">
                            <a
                                href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html">HttpServlet</a>
                            + Servlet Container (Tomcat, Jetty)
                        </li>
                        <li class="fragment">
                            JAX-RS i <a href="https://eclipse-ee4j.github.io/jersey/">Jersey</a>
                            <pre style="margin: 0; line-height: 1">
                                <code data-trim class="java">
                                    @Path("/myResource")
                                    @Produces("text/plain")
                                    public class SomeResource {
                                        @GET
                                        public String doGetAsPlainText() {
                                            // ...
                                        }

                                        @GET
                                        @Produces("text/html")
                                        public String doGetAsHtml() {
                                            // ...
                                        }
                                    }
                                </code>
                            </pre>
                        </li>
                        <li class="fragment">Spring</li>
                    </ul>
                </section>
                <section>
                    <h2>Spring</h2>
                    <ul>
                        <li class="fragment">
                            <code>@RestController</code>, <code>@ResponseBody</code>
                        </li>
                        <li class="fragment">
                            <code>@RequestMapping</code>,
                            <code>@PostMapping</code>,
                            <code>@GetMapping</code>,
                            <code>@PutMapping</code>,
                            <code>@DeleteMapping</code>
                        </li>
                        <li class="fragment">
                            <code>@PathVariable</code>,
                            <code>@RequestBody</code>,
                            <code>@RequestParam</code>
                        </li>
                        <li class="fragment">
                            <code>ResponseEntity</code>,
                            <code>Resource</code>
                        </li>
                    </ul>
                    <p>
                        <a class="fragment" href="https://spring.io/guides/tutorials/bookmarks/">Building REST services
                            with Spring</a>
                        <br>
                        <a class="fragment" href="https://spring.io/guides/gs/rest-service/">Building a RESTful Web
                            Service</a>
                    </p>
                    <aside class="notes">
                        O ka≈ºdym opowiadaƒá, mo≈ºe napisaƒá przyk≈Çadowy kod na tablicy. Magiczne wiƒÖzanie
                        parametr√≥w HttpServletRequest, obiekty z JSON-a itd.
                        <br>
                        Bƒôdzie jeszcze du≈ºo w kodzie i potem og√≥lnie o Springu
                    </aside>
                </section>
                <section>
                    <h2>Druga strona medalu</h2>
                    <ul>
                        <li class="fragment">
                            <a
                                href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html">
                                Natywny HttpClient (Java 11)
                            </a>
                        </li>
                        <li class="fragment"><a href="https://square.github.io/okhttp/">OkHttp</a></li>
                        <li class="fragment"><a href="https://square.github.io/retrofit/">Retrofit</a></li>
                        <li class="fragment"><a href="https://github.com/OpenFeign/feign">Feign</a></li>
                        <li class="fragment"><a
                                href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html">RestTemplate</a>
                        </li>
                    </ul>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <img src="img/wait2.gif" class="pure-img">
                    <aside class="notes">
                        Wyja≈õniƒá kontekst zadania - co jest czym i jak siƒô bƒôdzie zmieniaƒá; taski to takie serce naszego
                        produktu
                        <br>
                        PrzeglƒÖd - jak wyglƒÖda modularny monolit, ≈ºe odpalamy monolith, a reszta to tylko konfigi
                        <br>
                        Groovy - fancy testy // bug przy ich odpalaniu Mavenem - nie widaƒá w raporcie tych, co majƒÖ
                        @Unroll
                    </aside>
                </section>
                <section style="font-size: .9em">
                    <h2 style="margin: 0">ƒÜwiczenie 1</h2>
                    <ol>
                        <li class="fragment">Pobraƒá zaczƒôtƒÖ i om√≥wionƒÖ aplikacjƒô</li>
                        <li class="fragment">Odpaliƒá testy. Co przechodzi, a co wymaga poprawek?</li>
                        <li class="fragment">Dopisaƒá brakujƒÖce rzeczy w testach <code>Controllera</code></li>
                        <li class="fragment">Zaimplementowaƒá, ≈ºeby testy przechodzi≈Çy</li>
                        <li class="fragment">Uruchomiƒá Mongo, uruchomiƒá aplikacjƒô (modu≈Ç <code>monolith</code>)</li>
                        <li class="fragment">Przeklikaƒá REST API:
                            <ul>
                                <li class="fragment">Stworzyƒá przykadowy task</li>
                                <li class="fragment">Przeczytaƒá taski w przeglƒÖdarce, przeczytaƒá konkretny task</li>
                                <li class="fragment">Zaktualizowaƒá opis taska</li>
                                <li class="fragment">Dodaƒá kolejny task, usunƒÖƒá</li>
                            </ul>
                        </li>
                    </ol>
                    <aside class="notes">Jak kto≈õ nie wyrobi, to mogƒô przes≈Çaƒá rozwiƒÖzanie</aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2>
                        <span>HTTPS, HTTP/2?</span>
                    </h2>
                    <ul>
                        <li class="fragment">HTTPS = szyfrowane po≈ÇƒÖczenia</li>
                        <li class="fragment">Certyfikaty wystawiane przez CA (Certificate Authorities), kt√≥rym
                            przeglƒÖdarki
                            ufajƒÖ
                        </li>
                    </ul>
                    <div class="fragment">
                        <img src="img/http2.png" class="pure-img" style="width: 35%">
                    </div>
                    <aside class="notes">
                        http/2 - d≈Çugie po≈ÇƒÖczenie, protok√≥≈Ç binarny, wiele odpowiedzi na raz (obrazek), priorytety
                        <br>
                        http/3 - Hypertext Transfer Protocol (HTTP) over QUIC. QUIC is a transport layer network
                        protocol initially developed by Google where user space congestion control is used over the User
                        Datagram Protocol (UDP)
                    </aside>
                </section>
                <section>
                    <h2>PowiƒÖzane, pomocne</h2>
                    <ul>
                        <li><a href="https://spring.io/guides/tutorials/bookmarks/">Building REST services with
                                Spring</a></li>
                        <li><a href="https://www.restapitutorial.com/lessons/httpmethods.html">Using HTTP Methods for
                                RESTful Services</a></li>
                        <li><a href="http://restcookbook.com/HTTP%20Methods/idempotency/">What are idempotent and/or
                                safe methods?</a></li>
                        <li><a href="https://http.cat/">HTTP Cats</a></li>
                        <li><a href="https://github.com/akullpp/awesome-java#http-clients">Awesome Java - HTTP
                                Clients</a></li>
                        <li><a href="https://github.com/toddmotto/public-apis">Public APIs</a></li>
                        <li><a href="https://youtu.be/sSLXUOaOmkk">Mateusz Chrzonstowski - OData w Javie</a></li>
                    </ul>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 1 - modularny monolit</h2>
                    <ol>
                        <li>Dobre praktyki w projektowaniu i implementacji REST API</li>
                        <li class="fragment highlight-red">Techniki i frameworki pozwalajƒÖce skalowaƒá systemy
                            rozproszone
                        </li>
                        <li>PrzeglƒÖd baz danych NoSQL, zastosowanie i u≈ºycie w mikroserwisach</li>
                        <li>CQRS i Event Sourcing</li>
                    </ol>
                </section>
                <section>
                    <h3>Fallacies of distributed computing</h3>
                    <ol>
                        <li class="fragment">The network is reliable</li>
                        <li class="fragment">Latency is zero</li>
                        <li class="fragment">Bandwidth is infinite</li>
                        <li class="fragment">The network is secure</li>
                        <li class="fragment">Topology doesn't change</li>
                        <li class="fragment">There is one administrator</li>
                        <li class="fragment">Transport cost is zero</li>
                        <li class="fragment">The network is homogeneous</li>
                    </ol>
                    <aside class="notes">
                        Zacznijmy od tego, co bƒôdzie nam sta≈Ço na przeszkodzie
                        <br>
                        1994 (sic!)
                        <br>
                        koszt - http, json i inne to tekstowe rzeczy!!!
                    </aside>
                </section>
                <section>
                    <h2>Ready to fail - 1/2</h2>
                    <ul>
                        <li class="fragment">Eventual consistency</li>
                        <li class="fragment">Service discovery, scentralizowana konfiguracja</li>
                        <li class="fragment">Load balancing</li>
                        <li class="fragment">Circuit breaker</li>
                        <li class="fragment">Fail fast</li>
                        <li class="fragment">Rolling deployment</li>
                        <li class="fragment">Async by default
                            <ul>
                                <li class="fragment">At-Least-Once Delivery</li>
                            </ul>
                        </li>
                    </ul>
                    <aside class="notes">
                        Du≈ºo z tych poruszymy
                        <ul>
                            <li>NoSQL</li>
                            <li>health check, rejestrowanie siƒô</li>
                            <li>client-side LB</li>
                            <li>fail fast siƒô wiƒÖ≈ºe z circuit</li>
                            <li>Kontenery, Docker da≈Çy mo≈ºliwo≈õcy tych rolling√≥w i innych</li>
                            <li>CQRS</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>Ready to fail - 2/2</h2>
                    <ul>
                        <li class="fragment">OAuth2, JWT</li>
                        <li class="fragment">Metryki, monitoring</li>
                        <li class="fragment">Logi, tracing</li>
                        <li class="fragment">Testy kontraktowe</li>
                        <li class="fragment">API Gateway</li>
                        <li class="fragment">Saga, Process Manager</li>
                    </ul>
                    <aside class="notes">
                        Tutaj mniej powiemy
                        <ul>
                            <li>Token zna uprawnienia, brak centralnego zarzƒÖdcy (HTTP bezstanowe)</li>
                            <li>Zbieraƒá dane, "monitoring is a new testing", zapiƒÖƒá czujki na odchylenia, PERCENTYLE
                            </li>
                            <li>Odkryƒá drogƒô ≈ºƒÖdania - brak jednego admina, trzeba przekazywaƒá¬†traceId i nadawaƒá¬†przy
                                pierwszym wej≈õciu
                            </li>
                            <li>Testowanie pomiƒôdzy us≈Çugami; A == B && B == C => A == C</li>
                            <li>Gateway, Edge service = punkt wej≈õcia ze ≈õwiata</li>
                            <li>Rozproszone transakcje</li>
                        </ul>
                    </aside>
                </section>
                <section data-background-image="img/quartet.png" data-background-size="contain">
                    <aside class="notes">Kwartet Anscombe'a - zbiory praktycznie identyczne w prostych statystykach:
                        ≈õrednia, wariancja, korelacja x-y, regresja liniowa; PRECENTYLE
                    </aside>
                </section>
                <section>
                    <h2>async > sync</h2>
                    <a href="https://youtu.be/YjJZaGVwKAY" class="fragment" data-fragment-index="1">
                        <img src="img/async/sync.png" style="width: 70%" class="pure-img fragment fade-out replace"
                            data-fragment-index="2">
                        <img src="img/async/async.png" style="width: 70%" class="pure-img fragment fade-in replace"
                            data-fragment-index="2">
                    </a>
                    <aside class="notes">Nawet jak zielone p√≥jdƒÖ r√≥wnolegle, to i tak jedna failujƒÖca = ca≈Ço≈õƒá failuje
                    </aside>
                </section>
                <section>
                    <h2>Frameworki</h2>
                    <ul>
                        <li class="fragment">Spring Boot, Cloud</li>
                        <li class="fragment"><a href="https://axoniq.io/product-overview/axon-framework">Axon
                                Framework</a></li>
                        <li class="fragment"><a href="https://github.com/mfornos/awesome-microservices">Awesome
                                Microservices</a></li>
                    </ul>
                    <aside class="notes">
                        Spring zawsze mia≈Ç filozofiƒô zlepiania z dobrze dzia≈ÇajƒÖcych kawa≈Çk√≥w. Boot to
                        u≈Çatwi≈Ç, a Cloud zrobi≈Ç u≈ºytek z narzƒôdzi Netflixa
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section style="font-size: .7em">
                    <h2 style="margin: 0">ƒÜwiczenie 2 - 1/2</h2>
                    <ol>
                        <li class="fragment">Skorzystaƒá ze <a href="https://start.spring.io/">start.spring.io</a></li>
                        <li class="fragment">Wyklikaƒá:
                            <ul>
                                <li class="fragment">Java 11, Maven</li>
                                <li class="fragment">Spring Data MongoDB, Embedded MongoDB Database</li>
                                <li class="fragment">Rest Repositories</li>
                                <li class="fragment">
                                    Nazwa i opis: <i>plans</i>, <i>Management of the project plan</i>
                                </li>
                            </ul>
                        </li>
                        <li class="fragment">Zmieniƒá projekt w pom.xml na wz√≥r poprzedniego - testy Groovy itd. Dodaƒá
                            zale≈ºno≈õƒá do pozosta≈Çych plik√≥w pom (parent, monolith)
                        </li>
                        <li class="fragment">Zmieniƒá g≈Ç√≥wnƒÖ klasƒô programu na konfiguracjƒô, dodaƒá konwertery dla Mongo
                            (tak jak w poprzednim module)
                        </li>
                        <li class="fragment">Pobraƒá pliki z folderu "app", dodaƒá je do aplikacji i przeanalizowaƒá</li>
                        <li class="fragment">Wyszukaƒá jak w Springu dodaƒá obs≈Çugƒô dla
                            <code>javax.validation.constraints.NotBlank</code></li>
                        <li class="fragment">Stworzyƒá repozytorium, ≈ºeby m√≥c odpaliƒá jego test. Skorzystaƒá z adnotacji
                            <code>@RepositoryRestResource</code> i wystawiƒá ca≈Ço≈õƒá jako "plans"
                        </li>
                    </ol>
                    <aside class="notes">
                        Pokazaƒá¬†gdzie plany projekt√≥w wpisujƒÖ siƒô¬†w obecnƒÖ architekturƒô, czym sƒÖ itd.
                        <br>
                        daysToDeadline - ujemny i dodatni. Co znaczƒÖ
                        <br>
                        Nowe technologie = nowe mo≈ºliwo≈õci. Ile by by≈Ço roboty, ≈ºeby dodaƒá co≈õ takiego do istniejƒÖcego
                        projektu. Nawet je≈õli mamy Spring Boota, to przecie≈º¬†deploy=masakra, testy itd. Ma≈Çe, niezale≈ºne
                        kawa≈Çki rulez. Walidacje w og√≥le
                    </aside>
                </section>
                <section style="font-size: .7em">
                    <h2 style="margin: 0">ƒÜwiczenie 2 - 2/2</h2>
                    <ol>
                        <li class="fragment">Skorzystaƒá z CURL-a albo Postmana, ≈ºeby stworzyƒá kilka przyk≈Çadowych
                            zapyta≈Ñ.
                        </li>
                        <li class="fragment">Czy walidacje dzia≈ÇajƒÖ jak nale≈ºy? Czy status odpowiedzi jest zgodny z
                            oczekiwaniami?
                        </li>
                        <li class="fragment">Skonfigurowaƒá parsowanie daty i walidacje przy pomocy klasy
                            <code>RepositoryRestConfigurer</code></li>
                        <li class="fragment">Skonfigurowaƒá, ≈ºeby ca≈Ço≈õƒá by≈Ça wystawiona jako <code>/api/plans</code>, a
                            nie <code>/plans</code>
                        </li>
                        <li class="fragment">Jak dzia≈Ça HTTP PATCH przy wys≈Çaniu <code>projectSteps</code> do obiektu,
                            kt√≥ry ju≈º ma
                            jakie≈õ kroki?
                        </li>
                        <li class="fragment">Przetestowaƒá r√≥≈ºne opcje <code>page</code>, <code>size</code>,
                            <code>sort</code></li>
                    </ol>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2>PowiƒÖzane, pomocne</h2>
                    <ul style="font-size: .9em">
                        <li><a href="https://youtu.be/YjJZaGVwKAY">Toru≈Ñ JUG #32 - "Asynchronous by default, synchronous
                                when necessary" - Tomasz Nurkiewicz</a></li>
                        <li><a href="https://youtu.be/zq71CKfiB0g">Boiling Frogs 2019 - Jakub Kubry≈Ñski - Kuloorporna
                                komunikacja w systemtach rozproszonych</a></li>
                        <li><a href="https://youtu.be/M7sHpEA7298">4Developers 2019: Distributed journey, Piotr
                                Gankiewicz</a></li>
                        <li><a href="https://blog.risingstack.com/designing-microservices-architecture-for-failure/">Designing
                                a Microservices Architecture for Failure</a></li>
                        <li>
                            <a href="https://codeboje.de/spring-data-rest-tutorial/">Expose Your Spring Data
                                Repositories as a REST API</a>
                        </li>
                    </ul>
                    <aside class="notes">Ostatnie - HAL browser</aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 1 - modularny monolit</h2>
                    <ol>
                        <li>Dobre praktyki w projektowaniu i implementacji REST API</li>
                        <li>Techniki i frameworki pozwalajƒÖce skalowaƒá systemy rozproszone</li>
                        <li class="fragment highlight-red">PrzeglƒÖd baz danych NoSQL, zastosowanie i u≈ºycie w
                            mikroserwisach
                        </li>
                        <li>CQRS i Event Sourcing</li>
                    </ol>
                </section>
                <section>
                    <h2>Za≈Ço≈ºenia</h2>
                    <ul>
                        <li class="fragment">Nawet nie tyle NoSQL, co "nieleacyjne"</li>
                        <li class="fragment">Ruch "Polyglot Persistence" = Not Only SQL</li>
                        <li class="fragment">Wygoda u≈ºywania - brak ≈õcis≈Çych schemat√≥w
                            <ul>
                                <li class="fragment">Ale mo≈ºliwo≈õƒá stworzenia np. jakich≈õ walidacji</li>
                            </ul>
                        </li>
                        <li class="fragment">Skalowalno≈õƒá, dzia≈Çanie w ≈õwiecie rozproszonym</li>
                        <li class="fragment">Brak relacji = szybko≈õƒá odczytu</li>
                        <li class="fragment">Bardziej "obiektowa" reprezentacja danych</li>
                        <li class="fragment">Praktycznie zawsze Open Source, a na pewno budowane z otwartych technologii
                        </li>
                    </ul>
                    <aside class="notes">
                        Niekt√≥re majƒÖ nawet jakie≈õ interfejsy SQL-owe
                        <br>
                        Start NoSQL ~2000 vs. 1970; od razu pod mikrous≈Çugi
                    </aside>
                </section>
                <section>
                    <h2>Z≈Çoty m≈Çotek?</h2>
                    <ul>
                        <li class="fragment">Koniec ko≈Ñc√≥w i tak potrzebni sƒÖ¬†admini, zarzƒÖdzajƒÖcy klastrami itd.</li>
                        <li class="fragment">Ka≈ºda baza ma sw√≥j jƒôzyk. Jednak znany wszystkim SQL to du≈ºy plus</li>
                        <li class="fragment">Zamiast JOIN-√≥w, konieczno≈õƒá wielu ma≈Çych zapyta≈Ñ</li>
                        <li class="fragment">CAP?</li>
                    </ul>
                    <aside class="notes">CouchDB - REST, Mongo - a'la JS</aside>
                </section>
                <section data-background-image="img/cap.png" data-background-size="contain">
                    <aside class="notes">MongoDB is a single-master system and all reads go to the primary by default.
                        If you optionally enable reading from the secondaries then MongoDB becomes eventually consistent
                        where it's possible to read out-of-date results
                        <br>
                        Du≈ºo zale≈ºy od celu powstania - np. Cassandra - zapis, dodawanie do koszyka w Amazonie; ≈ºe dodam
                        na tel i na kompie i siƒô¬†rozjedzie to mniejszy problem
                    </aside>
                </section>
                <section>
                    <table>
                        <tr>
                            <td style="width: 50%; font-weight: bold; text-align: center;">SQL Terms/Concepts</td>
                            <td style="width: 50%; font-weight: bold; text-align: center;">MongoDB Terms/Concepts</td>
                        </tr>
                        <tr class="fragment">
                            <td>table</td>
                            <td>collection</td>
                        </tr>
                        <tr class="fragment">
                            <td>row</td>
                            <td>document or BSON document</td>
                        </tr>
                        <tr class="fragment">
                            <td>column</td>
                            <td>field</td>
                        </tr>
                        <tr class="fragment">
                            <td>index</td>
                            <td>index</td>
                        </tr>
                    </table>
                    <div class="fragment">
                        <a href="https://docs.mongodb.com/manual/reference/sql-comparison/">
                            SQL to MongoDB Mapping Chart</a>
                    </div>
                </section>
                <section>
                    <h2>R√≥≈ºne bazy</h2>
                    <ol>
                        <li class="fragment">Relacyjne
                            <ul>
                                <li class="fragment">Ustrukturyzowane dane z relacjami i jƒôzykiem zapyta≈Ñ</li>
                            </ul>
                        </li>
                        <li class="fragment">NoSQL
                            <ol>
                                <li class="fragment">Klucz-warto≈õƒá</li>
                                <li class="fragment">Dokumentowe</li>
                                <li class="fragment">Wide column</li>
                                <li class="fragment">Grafowe</li>
                            </ol>
                        </li>
                        <li class="fragment">Inne (time series)</li>
                    </ol>
                    <p class="fragment">
                        <a href="https://en.wikipedia.org/wiki/NoSQL#Types_and_examples">Wiki - NoSQL Types and
                            examples</a>
                    </p>
                    <aside class="notes">
                        klik w link
                        <br>
                        R√≥≈ºne kolumny w wide column przechowywane osobno na dysku. 2-wymiarowa baza key-val (kolumny
                        swoje dane i rekordy swoje)
                        <br>
                        Relacje oddane krawƒôdziami pomiƒôdzy wƒôz≈Çami; trudno wyobraziƒá¬†sobie takie relacje, media
                        spo≈Çeczno≈õciowe - temu zalajkowa≈Ç, ale na to tylko popatrzy≈Ç
                        <br>
                        Time series = np. zu≈ºycie procesora
                        <br>
                        Powiedzia≈Çbym, ≈ºe teraz NewSQL - Presto i inne karaluchy, time series z interfejsami SQL itd.
                    </aside>
                </section>
                <section>
                    <h2><img src="img/redis.png" class="pure-img" style="height: 1em;"></h2>
                    <ul>
                        <li class="fragment">Klucz-warto≈õƒá, Data-Structures Server</li>
                        <li class="fragment">In-memory, ale mo≈ºna te≈º¬†zrzucaƒá dane</li>
                        <li class="fragment">Obs≈Çuguje r√≥≈ºne struktury - stringi, zbiory, listy, bitmapy, streamy</li>
                        <li class="fragment">Na dysku - format nienadajƒÖcy siƒô¬†do odczytu, a&nbsp;tylko do rekonstrukcji
                            trzymania w pamiƒôci
                        </li>
                        <li class="fragment">Superszybki dziƒôki temu in-memory</li>
                    </ul>
                </section>
                <section>
                    <h2><img src="img/mongo.png" class="pure-img" style="height: 1em;"></h2>
                    <ul>
                        <li class="fragment">Baza dokumentowa z binarnym zapisem danych (BSON = Binary JSON)</li>
                        <li class="fragment">Indeksowanie, szukanie po regexach</li>
                        <li class="fragment">Load balancing przy wyskalowaniu horyzontalnym</li>
                        <li class="fragment">Agregowanie danych</li>
                        <li class="fragment">Transakcje, nawet na wiele dokument√≥w (od v4)</li>
                        <li class="fragment">Taki NoSQL dla SQL-owc√≥w</li>
                    </ul>
                </section>
                <section>
                    <h2><img src="img/neo.png" class="pure-img" style="height: 1em;"></h2>
                    <ul>
                        <li class="fragment">Baza grafowa, jedna z najpopularniejszych</li>
                        <li class="fragment">Wszystko jest wƒôz≈Çem, krawƒôdziƒÖ lub atrybutem</li>
                        <li class="fragment">Wƒôz≈Çy i krawƒôdzie majƒÖ¬†dodatkowo etykiety, ≈ºeby u≈Çatwiaƒá szukanie</li>
                        <li class="fragment">Cypher Query Language - mo≈ºliwo≈õci SQL-a, ale sk≈Çadnia dostosowana do
                            graf√≥w
                        </li>
                    </ul>
                    <aside class="notes">Tw√≥rca springa jest dyrektorem zarzƒÖdu</aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2 style="margin: 0">ƒÜwiczenie 3</h2>
                    <ol>
                        <li class="fragment">Zapoznaƒá siƒô z zapytaniami Mongo, korzystajƒÖc z interaktywnej strony <a
                                href="https://docs.mongodb.com/manual/tutorial/query-documents/">Query Documents</a>
                        </li>
                        <li class="fragment">
                            Zainstalowaƒá <a href="https://plugins.jetbrains.com/plugin/7141-mongo-plugin">plugin do
                                Mongo</a> dla IntelliJ
                        </li>
                        <li class="fragment">Dodaƒá wiƒôcej task√≥w i wyszukaƒá:
                            <ul style="font-size: .8em">
                                <li class="fragment">Tylko zrobione taski</li>
                                <li class="fragment">Taski, kt√≥rych id zawiera jaki≈õ ciƒÖg znak√≥w, np. "4bc"</li>
                                <li class="fragment">Taski, kt√≥rych deadline jest sprzed jakiej≈õ daty, np. przed
                                    18.11.2019
                                </li>
                                <li class="fragment">Taski, kt√≥rych deadline jest sprzed jakiej≈õ daty lub po prostu go
                                    nie ma
                                </li>
                                <li class="fragment">Taski, kt√≥rych deadline jest sprzed jakiej≈õ daty lub po prostu go
                                    nie ma i sƒÖ zrobione
                                </li>
                            </ul>
                        </li>
                        <li class="fragment">
                            <a href="https://docs.mongodb.com/manual/reference/sql-comparison/">SQL to MongoDB Mapping
                                Chart</a>
                        </li>
                    </ol>
                    <aside class="notes">
                        Kto≈õ nie zna SQL?
                        <pre><code>{done:true}</code></pre>
                        <pre><code>{taskId: {$regex: "4bc"}}</code></pre>
                        <pre><code>{deadline: {$lt: ISODate("2019-13-11T00:00:00.000Z")}}</code></pre>
                        <pre><code>{$or: [{deadline: {$gt: ISODate("2019-11-13T00:00:00.000Z")}}, {deadline: null}]}</code></pre>
                        <pre><code>{$or: [{deadline: {$gt: ISODate("2019-11-13T00:00:00.000Z")}}, {deadline: null}], done: true}</code></pre>
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-background-image="img/drake.jpg" data-background-size="contain">
                    <aside class="notes">Tak jak HQL dla niby takich samych, ale jednak innych SQL-i</aside>
                </section>
                <section>
                    <h2>Hibernate?</h2>
                    <ul>
                        <li class="fragment">
                            <pre
                                style="display: inline-block; height: 1em; width: 100%;"><code class="java">org.springframework.data.mongodb.core.mapping</code></pre>
                        </li>
                        <li class="fragment">
                            <code>@Entity</code> => <code>@Document</code>
                        </li>
                        <li class="fragment">
                            <code>@Column</code> => <code>@Field</code>
                        </li>
                        <li class="fragment">
                            <pre
                                style="display: inline-block; height: 1em;"><code class="java">javax.validation.constraints</code></pre>
                        </li>
                    </ul>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2>ƒÜwiczenie 4</h2>
                    <ol>
                        <li class="fragment">Napisaƒá wszystkie zapytania z poprzedniego ƒáwiczenia, korzystajƒÖc z
                            <code>TaskMongoRepository</code></li>
                        <li class="fragment">Sprawdziƒá dzia≈Çanie w te≈õcie</li>
                    </ol>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2>Mongo w Springu</h2>
                    <pre
                        style="width: 100%;"><code class="bash" data-trim style="font-size: .8em; max-height: 40em;">
                            # MONGODB (MongoProperties)
                            spring.data.mongodb.authentication-database= # Authentication database name.
                            spring.data.mongodb.database= # Database name.

                            # Fully qualified name of the FieldNamingStrategy to use.
                            spring.data.mongodb.field-naming-strategy=
                            spring.data.mongodb.grid-fs-database= # GridFS database name.
                            spring.data.mongodb.host= # Mongo server host. Cannot be set with URI.

                            # Login password of the mongo server. Cannot be set with URI.
                            spring.data.mongodb.password=
                            spring.data.mongodb.port= # Mongo server port. Cannot be set with URI.
                            spring.data.mongodb.repositories.type=auto # Type of Mongo repositories to enable.

                            # Mongo database URI. Cannot be set with host, port and credentials.
                            spring.data.mongodb.uri=mongodb://localhost/test
                            spring.data.mongodb.username= # Login user of the mongo server. Cannot be set with URI.</code></pre>
                </section>
                <section>
                    <h2>PowiƒÖzane, pomocne</h2>
                    <ul>
                        <li>
                            <a href="https://blog.nahurst.com/visual-guide-to-nosql-systems">Visual Guide to NoSQL
                                Systems</a>
                        </li>
                        <li>
                            <a href="https://docs.mongodb.com/manual/tutorial/query-documents/">Query Documents</a>
                        </li>
                        <li>
                            <a href="https://docs.mongodb.com/manual/reference/sql-comparison/">SQL to MongoDB Mapping
                                Chart</a>
                        </li>
                    </ul>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 1 - modularny monolit</h2>
                    <ol>
                        <li>Dobre praktyki w projektowaniu i implementacji REST API</li>
                        <li>Techniki i frameworki pozwalajƒÖce skalowaƒá systemy rozproszone</li>
                        <li>PrzeglƒÖd baz danych NoSQL, zastosowanie i u≈ºycie w mikroserwisach</li>
                        <li class="fragment highlight-red">CQRS i Event Sourcing</li>
                    </ol>
                </section>
                <section>
                    <h2>A gdyby tak...</h2>
                    <ul>
                        <li class="fragment">System to komendy i odczyty + zdarzenia</li>
                        <li class="fragment">Zachowania</li>
                        <li class="fragment">
                            Warto stawiaƒá na zachowania - ≈Çatwiej wychwyciƒá regu≈Çy biznesowe (np. w
                            rozmowie z "biznesem")
                        </li>
                        <li class="fragment">CQRS + ES!</li>
                    </ul>
                    <aside class="notes">Inne spojrzenie na temat</aside>
                </section>
                <section>
                    <h2>Command</h2>
                    <ul>
                        <li class="fragment">Zmienia stan</li>
                        <li class="fragment">POST, PUT, PATCH, DELETE</li>
                        <li class="fragment">Wychodzi od u≈ºytkownika, skutkuje zmianƒÖ w systemie (zdarzeniem)
                            <ul>
                                <li class="fragment">Potencjalnie jakie≈õ automaty, nie tylko u≈ºytkownicy</li>
                            </ul>
                        </li>
                    </ul>
                    <aside class="notes">Ale automat to raczej zdarzenie, a nie komenda</aside>
                </section>
                <section>
                    <h2>Query</h2>
                    <ul>
                        <li class="fragment">Bezinwazyjny odczyt danych</li>
                        <li class="fragment">GET</li>
                        <li class="fragment">Prezentowanie dla u≈ºytkownika</li>
                    </ul>
                </section>
                <section>
                    <h2>Responsibility Segregation</h2>
                    <ul>
                        <li class="fragment">Podzia≈Ç. Osobne modele do odczytu i do zapisu</li>
                        <li class="fragment">MogƒÖ byƒá zoptymalizowane - np. do odczytu baza relacyjna, do zapisu -
                            Cassandra
                        </li>
                        <li class="fragment">Synchronizacja danych - model odczytu reaguje na zdarzenie, wygenerowane
                            przez zapisy
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>Event Sourcing</h2>
                    <ul>
                        <li class="fragment">Niemutowalny, append-only log zdarze≈Ñ</li>
                        <li class="fragment">To tak mo≈ºna?
                            <ul>
                                <li class="fragment">Np. w ksiƒôgowo≈õci - nie da siƒô zmieniƒá wystawionej faktury.
                                    Faktura-korekta
                                </li>
                            </ul>
                        </li>
                        <li class="fragment">"Lekka" wersja - model zapisu rzuca eventy, model odczytu nas≈Çuchuje</li>
                        <li class="fragment">100% - zdarzenia jako jedyne ≈∫r√≥d≈Ço informacji</li>
                    </ul>
                    <aside class="notes">Np. nie da siƒô¬†inaczej zbudowaƒá¬†modelu, jak przez na≈Ço≈ºenie na siebie
                        wszystkich event√≥w. Wchodzi komenda, to musi ogarnƒÖƒá jaki jest aktualny stan
                        <br>
                        Nowe wymaganie - zaproponowanie komu≈õ produktu, kt√≥ry kiedy≈õ zosta≈Ç usuniƒôty z koszyka; w ES
                        mamy te dane, mo≈ºemy to dodaƒá
                    </aside>
                </section>
                <section data-background-image="img/cqrs/single.png" data-background-size="contain"></section>
                <section data-background-image="img/cqrs/cqrs.png" data-background-size="contain">
                    <img src="img/cqrs/cqrs-hard.jpg" class="pure-img fragment">
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom" data-markdown style="font-size: .85em">
                    <script type="text/template">
                    ## ƒÜwiczenie 5 <!-- .element: style="margin: 0" -->
                    1. Pobraƒá testy i zobaczyƒá, czego brakuje <!-- .element: class="fragment" -->
                    2. <!-- .element: class="fragment" --> Dodaƒá proste klasy `TaskCreated`, `TaskDone` i `TaskUndone`. MogƒÖ mieƒá klasƒô bazowƒÖ `TaskEvent`
                    3. <!-- .element: class="fragment" --> Zmieniƒá `Task`, ≈ºeby opr√≥cz zmiany pola `done`, zwraca≈Ç powy≈ºsze klasy
                    4. <!-- .element: class="fragment" --> Dodaƒá klasƒô `TaskService`, zawierajƒÖcƒÖ w sobie repozytorium, przekazywanƒÖ do kontrolera
                    5. <!-- .element: class="fragment" --> W serwisie dodaƒá `ApplicationEventPublisher`
                    6. <!-- .element: class="fragment" --> Daƒá¬†adnotacjƒô `@Transactional` na metodach `create` i `changeState`. Wo≈Çaƒá w nich `publisher.publishEvent(event)`
                    7. <!-- .element: class="fragment" --> Zmieniƒá kontroler, ≈ºeby korzysta≈Ç z metody PATCH i pozwala≈Ç wy≈ÇƒÖcznie na zmianƒô statusu taska
                </script>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom" data-markdown style="font-size: .65em">
                    <script type="text/template">
                    ## ƒÜwiczenie 6 <!-- .element: style="margin: 0" -->
                    1. Utworzyƒá¬†nowy modu≈Ç (start.spring.io): wybraƒá Mongo DB i Web, ca≈Ço≈õƒá nazwaƒá "reports"
                    2. Dodaƒá klasƒô, np. `ReportedTaskEventListener` i daƒá jej adnotacjƒô `@Service`
                    3. Na podstawie [artyku≈Çu](https://www.baeldung.com/spring-events#annotation-driven) i przyk≈Çadu (folder cw6/example) dodaƒá obs≈Çugƒô zdarze≈Ñ z poprzedniego ƒáwiczenia*
                    3. Utworzyƒá¬†klasƒô reprezentujƒÖcƒÖ "zaraportowany task" - odpowiednik klasy `Task`, kt√≥ry bƒôdzie powstawa≈Ç ze zdarze≈Ñ (stworzyƒá odpowiednie konstruktory)
                    4. Na ka≈ºde odebrane zdarzenie zapisywaƒá "zaraportowany task" w bazie
                    5. Stworzyƒá¬†kontroler, kt√≥ry umo≈ºliwi nowƒÖ reprezentacjƒô klasy `Task` na r√≥≈ºne sposoby, na podstawie zaraportowanych task√≥w: najszybciej zmieniony task, najczƒô≈õciej zmieniane taski, zrobione taski, najwiƒôcej czasu PRZED deadline, najwiƒôcej po. Plan minimum:
                    * Zwr√≥cenie akaualnych stan√≥w + informacji ile by≈Ço zmian stanu
                    * Raport zrobionych task√≥w
                    ___
                    *Potrzebny bƒôdzie dostƒôp do zdarze≈Ñ, wiƒôc nowy modu≈Ç musi mieƒá "tasks" jako swojƒÖ¬†zale≈ºno≈õƒá <!-- .element: style="font-size: .75em" -->
                </script>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section>
                    <h2>PowiƒÖzane, pomocne</h2>
                    <ul>
                        <li><a href="https://www.martinfowler.com/bliki/CQRS.html">Martin Fowler, CQRS</a></li>
                        <li>
                            <a href="https://youtu.be/jyRspw_Bl18">JDD 2017: EventSourcing i CQRS. Wprowadzenie, kt√≥rego
                                brakowa≈Ço (S≈Çawomir Jachowicz)</a>
                        </li>
                        <li>
                            <a href="https://github.com/ddd-by-examples/all-things-cqrs">all-things-cqrs</a>; polecam:
                            <code>with-application-events-immutable</code>
                        </li>
                    </ul>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 2 - mikroserwisy</h2>
                    <ol>
                        <li class="fragment highlight-red">Mikroserwisy</li>
                        <li>Service registration and discovery, routing, distributed configuration</li>
                        <li>Load balancing and Circuit Breakers</li>
                        <li>Continuous Integration i Continuous Deployment w kontek≈õcie mikroserwis√≥w</li>
                    </ol>
                </section>
                <section>
                    <h3>Fallacies of distributed computing</h3>
                    <ol>
                        <li class="fragment">The network is reliable</li>
                        <li class="fragment">Latency is zero</li>
                        <li class="fragment">Bandwidth is infinite</li>
                        <li class="fragment">The network is secure</li>
                        <li class="fragment">Topology doesn't change</li>
                        <li class="fragment">There is one administrator</li>
                        <li class="fragment">Transport cost is zero</li>
                        <li class="fragment">The network is homogeneous</li>
                    </ol>
                </section>
                <section>
                    <h2>Modularno≈õƒá i rozproszenie</h2>
                    <table class="monolith">
                        <tbody>
                            <tr>
                                <td class="fragment" data-fragment-index="3">Modularny monolit</td>
                                <td class="fragment" data-fragment-index="2">Mikroserwisy</td>
                            </tr>
                            <tr>
                                <td class="fragment" data-fragment-index="1">Monolit</td>
                                <td class="fragment" data-fragment-index="4">Rozproszony monolit</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
                <section>
                    <h2>Zalety</h2>
                    <ul>
                        <li class="fragment">Mo≈ºna skalowaƒá tylko konkretny kawa≈Çek systemu</li>
                        <li class="fragment">Mo≈ºna skorzystaƒá¬†z r√≥≈ºnych jƒôzyk√≥w programowania, dostosowanych do problemu
                        </li>
                        <li class="fragment">Wyciek pamiƒôci? Inny problem? Powinien dotknƒÖƒá tylko mikroserwisu</li>
                        <li class="fragment">Niezale≈ºno≈õƒá¬†wdro≈ºe≈Ñ, ka≈ºda czƒô≈õƒá systemu rozwija siƒô we w≈Çasnym tempie
                        </li>
                        <li class="fragment">Lokalny development - te≈º tylko to, czego potrzebujemy</li>
                    </ul>
                    <aside class="notes">
                        Nie musimy ≈õciƒÖgaƒá¬†uber-repo, czƒô≈õciowo ≈ÇƒÖczymy siƒô z devem np., bazy ma≈Çe i niezale≈ºne.
                        <br>
                        Niezale≈ºno≈õƒá, ale warto rozwa≈ºyƒá jaki≈õ kontrakt w organizacji albo podstawowƒÖ bibliotekƒô - ma≈ÇƒÖ
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-markdown style="font-size: .75em">
                    <script type="text/template">
                        ## ƒÜwiczenie 7 <!-- .element: style="margin: 0" -->
                        1. <!-- .element: class="fragment" data-fragment-index="1" --> UsunƒÖƒá¬†"plans" z "monolith/pom.xml"
                        2. <!-- .element: class="fragment" data-fragment-index="2" --> Zmieniƒá `PlansConfiguration` na `PlansApplication`, usunƒÖƒá wszystkie `@ConditionalOnMissingBean`, daƒá dostƒôp publiczny, adnotacjƒô `@SpringBootApplication` i metodƒô
                           ```
                           public static void main(String[] args) {
                               SpringApplication.run(PlansApplication.class, args);
                           }
                           ```
                        3. <!-- .element: class="fragment" data-fragment-index="3" --> Przenie≈õƒá konfiguracjƒô z monolitu ("application.properties") do "plans". Dodaƒá wpisy  `spring.data.mongodb.database=plans` i `spring.profiles.active=local`*
                        4. <!-- .element: class="fragment" --> Utworzyƒá plik "application-local.properties" i ustawiƒá w nim `server.port=8081`
                        5. <!-- .element: class="fragment" --> UsunƒÖƒá¬†`TestApp` z "plans"

                        ___
                        *Spring w≈ÇƒÖczajƒÖc aplikacjƒô¬†ustawi profil "local" i bƒôdzie korzysta≈Ç z dostosowanych do tego ustawie≈Ñ <!-- .element: class="fragment" data-fragment-index="3" style="font-size: .65em; taxt-align: left" -->
                    </script>
                    <aside class="notes">
                        YAML pokazaƒá dopiero jako followup; application + spring.main.banner-mode:off?
                        <br>
                        ≈ºe sƒÖ¬†r√≥≈ºne poziomy konfiga, consul wjedzie i nadpisze, mo≈ºna z CLI, mo≈ºna profil
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-markdown style="font-size: .85em">
                    <script type="text/template">
                        ## ƒÜwiczenie 8 - 1/2

                        1. Utworzyƒá publicznƒÖ klasƒô `ConfigProps` w "plans". Daƒá jej¬†adnotacje `@Configuration` i `@ConfigurationProperties("plans")`*
                        2.Utworzyƒá wewnƒôtrznƒÖ klasƒô `public static class ExternalServiceUrls`
                        3. `ConfigProps` powinno mieƒá pole `private ExternalServiceUrls services`, a `ExternalServiceUrls` - `private String tasksUrl`. Dodaƒá polom gettery i settery
                        4. Dodaƒá¬†w≈Ça≈õciwo≈õƒá* do "application-local.properties":
                           ```
                           plans.services.tasksUrl=http://localhost:8080/api/tasks
                           ```
                        ___
                        *W razie problem√≥w IntelliJ dodaƒá zale≈ºno≈õƒá do "pom.xml": spring-boot-configuration-processor <!-- .element: class="fragment" data-fragment-index="1" style="font-size: .5em; taxt-align: left" -->
                        </script>
                </section>
                <section data-markdown style="font-size: .85em">
                    <script type="text/template">
                        ## ƒÜwiczenie 8 - 2/2  <!-- .element: style="margin: 0" -->

                        5. <!-- .element: class="fragment" --> Dodaƒá nowy `@Bean` - `RestTemplate`
                        6. <!-- .element: class="fragment" --> Stworzyƒá klasƒô `TaskDto` z konstruktorem ustawiajƒÖcym pola:
                           ```
                           @JsonCreator
                           TaskDto(@JsonProperty("id") String id,
                                   @JsonProperty("text") String text,
                                   @JsonProperty("deadline") ZonedDateTime deadline)
                           ```
                           Dodaƒá te≈º `equals`, `hashCode`, gettery i konstruktor pobierajƒÖcy tylko `text` i `deadline`.
                        7. <!-- .element: class="fragment" --> Stworzyƒá kontroler, np. dla adresu "/api/plans/{planId}/tasks", kt√≥ry zamieni plan i wszystkie jego krkoki na taska z deadline'ami. Przyk≈Çadowe rozwiƒÖzanie: "cw8/example"
                        8. <!-- .element: class="fragment" --> Przetestowaƒá¬†- dodaƒá¬†plan i utworzyƒá¬†dla niego taski
                    </script>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section style="font-size: .75em">
                    <h2 style="margin:0">ƒÜwiczenie 9 - 1/2</h2>
                    <ol>
                        <li class="fragment">Pobraƒá projekt z folderu "app" - sƒÖ tam wydzielone aplikacje, nie ma ju≈º
                            monolitu</li>
                        <li class="fragment">W module-≈∫r√≥dle zdarze≈Ñ (tasks)
                            <ol>
                                <li class="fragment">Dodaƒá adnotacjƒô <code>@EnableBinding(Source.class)</code> -
                                    mo≈ºliwo≈õƒá wysy≈Çania
                                    zdarze≈Ñ na jaki≈õ konfigurowalny kana≈Ç</li>
                                <li class="fragment">WstrzyknƒÖƒá klasƒô <code>Source</code> do <code>TaskService</code>,
                                    dodaƒá pole <code>private Source
                                            source</code> i skorzystaƒá z niego do publikacji zdarzenia
                                    <pre style="margin:0"><code class="java" data-trim>
                                            source.output().send(MessageBuilder
                                                .withPayload(event)
                                                .setHeader(EVENT_TYPE_HEADER, event.getType())
                                                .build());</code></pre>
                                </li>
                                <li class="fragment">Wyrzuciƒá ApplicationEventPublisher z TaskService</li>
                                <li class="fragment">Ustawiƒá spring.cloud.stream.bindings.output - destination oraz
                                    contentType w application.yml</li>
                            </ol>
                        </li>
                    </ol>
                    <aside class="notes">
                        duplikacja klas z eventami, dostosowany konfig object mappera, spring cloud -
                        spring-cloud-stream, spring-cloud-stream-binder-kafka
                        <br>
                        docker-compose om√≥wiƒá
                        <br><br>
                        ten header doda≈Çem na eventach - typ, stamtƒÖd braƒá
                        <br>
                        w raportach @StreamListener
                        ale w taskach ju≈º bez @SendTo, bo wo≈Çamy z wnƒôtrza, warunkowo itd.
                        <br>
                        w trakcie rozwiƒÖzywania - Spring nam dodaje swoje abstrakcje. Tak, jak data to w rzeczywisto≈õci
                        r√≥≈ºne zapytania schowane za findById, tak tu mamy destination i headers - RabbitMQ trochƒô
                        inaczej, Kafka trochƒô inaczej, a w Springu po prostu destination i headers;
                    </aside>
                </section>
                <section>
                    <h2 style="margin:0">ƒÜwiczenie 9 - 2/2</h2>
                    <ol>
                        <li class="fragment">W module-odbiorcy zdarze≈Ñ (reports)
                            <ol>
                                <li class="fragment">Dodaƒá <code>@EnableBinding(Sink.class)</code></li>
                                <li class="fragment">Podmieniƒá w Listenerze - metody majƒÖ mieƒá TYLKO
                                    <pre style="margin: 0; width: 100%;"><code class="java" data-trim>
                                    @StreamListener(
                                        target = Sink.INPUT, condition = "headers['type'] == 'done'"
                                    )</code></pre>
                                    i
                                    kolejne conditiony - <code>created</code>, <code>undone</code></li>
                                <li class="fragment">Skonfigurowaƒá jak poprzednio, ale input
                                    <code>spring.cloud.stream.bindings.input</code> - destination oraz contentType</li>
                            </ol>
                        </li>
                    </ol>
                    <aside class="notes">
                        duplikacja klas z eventami, dostosowany konfig object mappera, spring cloud -
                        spring-cloud-stream, spring-cloud-stream-binder-kafka
                        <br>
                        docker-compose om√≥wiƒá
                        <br><br>
                        ten header doda≈Çem na eventach - typ, stamtƒÖd braƒá
                        <br>
                        w raportach @StreamListener
                        ale w taskach ju≈º bez @SendTo, bo wo≈Çamy z wnƒôtrza, warunkowo itd.
                        <br>
                        w trakcie rozwiƒÖzywania - Spring nam dodaje swoje abstrakcje. Tak, jak data to w rzeczywisto≈õci
                        r√≥≈ºne zapytania schowane za findById, tak tu mamy destination i headers - RabbitMQ trochƒô
                        inaczej, Kafka trochƒô inaczej, a w Springu po prostu destination i headers;
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 2 - mikroserwisy</h2>
                    <ol>
                        <li>Mikroserwisy</li>
                        <li class="fragment highlight-red">Service registration and discovery, routing, distributed
                            configuration
                        </li>
                        <li>Load balancing and Circuit Breakers</li>
                        <li>Continuous Integration i Continuous Deployment w kontek≈õcie mikroserwis√≥w</li>
                    </ol>
                </section>
                <section>
                    <h2>Service discovery</h2>
                    <ul>
                        <li class="fragment">KsiƒÖ≈ºka telefoniczna do us≈Çug</li>
                        <li class="fragment">Ka≈ºda us≈Çuga, kt√≥ra startuje, powinna zg≈Çosiƒá swojƒÖ gotowo≈õƒá</li>
                        <li class="fragment">Sprawdzanie, czy zarejestrowana us≈Çuga odpowiada</li>
                        <li class="fragment">Bonusy: miejsce, skƒÖd us≈Çugi mogƒÖ zaciƒÖgaƒá konfiguracje</li>
                    </ul>
                    <aside class="notes">Odpowiadanie - jaki≈õ health check, usuwanie z rejestru jak le≈ºy
                        <br>
                        Przy wielu us≈Çugach i instancjach dla ka≈ºdej dobrze mieƒá jakie≈õ wsp√≥lne miejsce
                    </aside>
                </section>
            </section>
            <section>
                <section data-markdown>
                    <script type="text/template">
                        ## ƒÜwiczenie 10

                        1. Pobraƒá¬†projekt i zobaczyƒá, co siƒô¬†zmieni≈Ço (nazwy projekt√≥w, zale≈ºno≈õci)
                        2. `docker run -d --name=dev-consul -p 8400:8400 -p 8500:8500 -e CONSUL_BIND_INTERFACE=eth0 consul`
                        3. Czy wszystkie us≈Çugi poprawnie zarejestrowa≈Çy siƒô w Consulu? Co jest problemem? (szukaƒá¬†po plikach pom.xml)
                        4. Poprawiƒá
                    </script>
                    <aside class="notes">
                        nazwy - potrzebne do przedstawienia siƒô consulowi
                        <br>
                        plany - dosta≈Çy spring clouda wreszcie
                        <br>
                        actuator w plans - pokazaƒá co daje
                    </aside>
                </section>
            </section>
            <section>
                <section data-markdown style="font-size: .75em">
                    <script type="text/template">
                        ## ƒÜwiczenie 11 <!-- .element: style="margin: 0" -->

                        1. PodpiƒÖƒá wszƒôdzie zale≈ºno≈õƒá¬†`spring-cloud-starter-consul-config`
                        2. Przenie≈õƒá¬†wa≈ºne dla Consula ustawienia do plik√≥w bootstrap.yml (nazwa projektu, rzeczy ze `spring.cloud.consul`)
                        3. W oparciu o [artyku≈Ç](https://cloud.spring.io/spring-cloud-consul/reference/html/#spring-cloud-consul-config) zdefiniowaƒá konfiguracjƒô w pliku YAML w Consulu
                           * W konfiguracji udostƒôpniƒá wszyskie endpoiny Actuatora wszystkim serwisom:
                              ```
                               management:
                               endpoints:
                                   web:
                                   exposure:
                                       include: "*"
                               ```
                        4. W niedzia≈ÇajƒÖcych testach Groovy dodaƒá `@TestPropertySource(properties = ['spring.cloud.consul.config.enabled = false'])`
                    </script>
                    <aside class="notes">
                        Przej≈õƒá do Consula i pokazaƒá gdzie tam siƒô konfigurue i jak to dzia≈Ça
                        <br>
                        JAJKO I KURA - konfigurujemy po≈ÇƒÖczenie z Consulem, ale to Consul ma nam daƒá konfiga -
                        bootstrap.yml
                        to
                        the rescue
                        <br>
                        app name - to bƒôdzie w Consulu
                    </aside>
                </section>
            </section>
            <section>
                <h2>PowiƒÖzane, pomocne</h2>
                <ul>
                    <li><a href="https://cloud.spring.io/spring-cloud-consul/reference/html/">Spring Cloud Consul</a>
                    </li>
                    <li><a href="https://dzone.com/articles/managing-secrets-with-vault">Managing Secrets With Vault</a>
                    </li>
                </ul>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 2 - mikroserwisy</h2>
                    <ol>
                        <li>Mikroserwisy</li>
                        <li>Service registration and discovery, routing, distributed configuration</li>
                        <li class="fragment highlight-red">Load balancing and Circuit Breakers</li>
                        <li>Continuous Integration i Continuous Deployment w kontek≈õcie mikroserwis√≥w</li>
                    </ol>
                </section>
                <section>
                    <h2>Load balancing</h2>
                    <ul>
                        <li class="fragment">Rozrzucanie ruchu pomiƒôdzy r√≥≈ºne instancje ka≈ºdej us≈Çugi</li>
                        <li class="fragment">"Serwerowy" - np. przy Consulu i nam rozdziela ruch arbitralnie</li>
                        <li class="fragment">Po stronie klienta - mamy zrzut adres√≥w us≈Çug, z kt√≥rymi rozmawiamy</li>
                    </ul>
                    <aside class="notes">
                        Kt√≥ry lepszy? Serwer, czy nie?
                    </aside>
                </section>
                <section>
                    <h2>Circuit Breaker</h2>
                    <ul>
                        <li class="fragment">OdciƒÖ≈ºanie us≈Çug, kt√≥re majƒÖ problemy</li>
                        <li class="fragment">Wolna odpowied≈∫ (latency), z≈Ça odpowied≈∫, brak instancji, bandwith, retry,
                            cache</li>
                        <li class="fragment"><a href="https://github.com/Netflix/Hystrix#hystrix-status">NIE Hystrix</a>
                        </li>
                    </ul>
                    <aside class="notes">
                        Service mesh
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-markdown>
                    <script type="text/template">
                        ## ƒÜwiczenie 12

                        1. PodpiƒÖƒá Load Balancing w oparciu o [artyku≈Ç](https://cloud.spring.io/spring-cloud-consul/reference/html/#looking-up-services)
                        2. Zmieniƒá¬†konfiguracjƒô adresu `plans.services.tasksUrl: http://TASKS/api/tasks` i przenie≈õƒá¬†jƒÖ do application.yml
                    </script>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-markdown style="font-size: .75em">
                    <script type="text/template">
                        ## ƒÜwiczenie 13 <!-- .element: style="margin: 0" -->

                        1. Pobraƒá zale≈ºno≈õƒá
                           ```
                           <dependency>
                                <groupId>io.github.resilience4j</groupId>
                                <artifactId>resilience4j-spring-boot2</artifactId>
                                <version>1.1.0</version>
                            </dependency>
                           ```
                        2. Stworzyƒá klasƒô `TaskClient`, pobierajƒÖcƒÖ `RestTemplate` i `ConfigProps`. Przenie≈õƒá do niej wysy≈Çanie zapytania do mikroserwisu task√≥w. U≈ºyƒá tej klasy w klasie `TaskController`
                        3. W oparciu o [przyk≈Çad](https://resilience4j.readme.io/docs/getting-started-3), dodaƒá¬†adnotacjƒô `@CircuitBreaker` i warto≈õci konfiguracyjne, m.in. `waitDurationInOpenState: 60s` i w razie niepowodzenia, logowaƒá informacjƒô w konsoli i zwracaƒá przekazany task
                           * Mo≈ºna stworzyƒá¬†metodƒô np.
                              ```
                              private TaskDto fallback(TaskDto toSend, IllegalStateException e)
                              ```
                    </script>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>Faza 2 - mikroserwisy</h2>
                    <ol>
                        <li>Mikroserwisy</li>
                        <li>Service registration and discovery, routing, distributed configuration</li>
                        <li>Load balancing and Circuit Breakers</li>
                        <li class="fragment highlight-red">Continuous Integration i Continuous Deployment w kontek≈õcie
                            mikroserwis√≥w
                        </li>
                    </ol>
                </section>
                <section>
                    <h2>CI, CD</h2>
                    <ul>
                        <li class="fragment">Podstawa = automatyzacja, one-click deploy</li>
                        <li class="fragment">CI = synchro z g≈Ç√≥wnym kodem</li>
                        <li class="fragment">CD (Delivery) = procesy testowania i wdra≈ºania zautomatyzowane, mo≈ºna
                            wrzucaƒá</li>
                        <li class="fragment">CD (Deployment) = ka≈ºda zmiana przechodzƒÖca testy wchodzi na PROD</li>
                    </ul>
                </section>
                <section data-background-image="img/docker.jpg" data-background-size="contain">
                    <aside class="notes">
                        Opowiedzieƒá: kontener = uruchomiony obraz, a obraz to przepis na kontener; compose = wiele
                        jednocze≈õnie
                    </aside>
                </section>
                <section>
                    <h2>Dockerfile</h2>
                    <pre><code data-trim>
                    FROM adoptopenjdk:11-jre-hotspot

                    ENV SPRING_PROFILES_ACTIVE=prod
                    ENV SERVER_PORT=8080
                    ENV SPRING_OUTPUT_ANSI_ENABLED=ALWAYS

                    COPY target/*.jar app.jar

                    CMD java -jar /app.jar

                    EXPOSE ${SERVER_PORT}
                    </code></pre>
                    <aside class="notes"></aside>
                    <aside class="notes">
                        https://docs.docker.com/engine/reference/builder/
                        <br>
                        compose -f -f
                        <br>
                        https://docs.docker.com/compose/extends/
                        <br>
                        UWAGA: rozwalimy sobie konfiguracjƒô w Consulu (brak git2consul np.) - albo brak volumes `
                        <br>
                        compose pod local i pod og√≥≈Ç
                    </aside>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>ƒÜwiczenie 14</h2>
                    <ol>
                        <li class="fragment">Dodaƒá wszƒôdzie pliki dockerowe</li>
                        <li class="fragment">Skorzystaƒá z opisu plugina mavenowego i tworzyƒá obraz, np.
                            "microservices/tasks" dla us≈Çugi "tasks"</li>
                        <li class="fragment">Ustawiƒá, ≈ºeby plugin odpala≈Ç budowanie dockerem dopiero przy mvn package
                        </li>
                        <li class="fragment">Dodaƒá to w ka≈ºdej us≈Çudze i zawo≈Çaƒá clean package z poziomu projektu
                            parent.</li>
                        <li class="fragment">Zweryfikowaƒá istnienie obraz√≥w poleceniem docker images</li>
                    </ol>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom" style="font-size: .5em">
                <section data-transition="zoom">
                    <h2 style="margin: 0">ƒÜwiczenie 15</h2>
                    <ol>
                        <li class="fragment">Otworzyƒá kod z folderu "app"</li>
                        <li class="fragment">W obrazach dockerowych dodaƒá op√≥≈∫nienie startu aplikacji
                            <ul>
                                <li class="fragment">Skorzystaƒá ze zmiennej ≈õrodowiskowej ENV DELAY_START=0</li>
                                <li class="fragment">Zmieniƒá komendƒô startujƒÖcƒÖ:
                                    <pre
                                        style="margin: 0; font-size: .5em"><code class="bash" data-trim>
                                        CMD echo "The application will start in ${DELAY_START}s..." && sleep ${DELAY_START} && java -jar /app.jar</code></pre>
                                </li>
                            </ul>
                        </li>
                        <li class="fragment">Przeanalizowaƒá plik docker-compose-tools.yml - uruchomienie zewnƒôtrznych
                            narzƒôdzi</li>
                        <li class="fragment">Stworzyƒá docker-compose-apps.yml, kt√≥ry skorzysta z naszych obraz√≥w, np.
                            "microservices/tasks". Ustawiƒá kontenerowi zmienne, kt√≥re nadpiszƒÖ warto≈õci np. z
                            bootstrap.yml albo application.yml
                            <ul class="fragment">
                                <li>SPRING_CLOUD_CONSUL_HOST=consul</li>
                                <li>SPRING_CLOUD_CONSUL_PORT=8500</li>
                                <li>SPRING_DATA_MONGODB_URI=mongodb://mongo:27017</li>
                                <li>SPRING_CLOUD_STREAM_KAFKA_BINDER_BROKERS=kafka</li>
                                <li>SPRING_CLOUD_STREAM_KAFKA_BINDER_ZK_NODES=zookeeper</li>
                                <li>DELAY_START=10</li>
                            </ul>
                        </li>
                        <li class="fragment">Ustawiƒá mapowania port√≥w, np. 8082:8080 - to co w kontenerze jako 8080, u
                            nas 8082</li>
                        <li class="fragment">W przypadku serwisu task√≥w dodaƒá mapowanie 8083-8085:8080</li>
                        <li class="fragment">Zatrzymaƒá wszystkie dockery i uruchomiƒá: docker-compose -f
                            docker-compose-tools.yml -f docker-compose-apps.yml up. Pod jakim adresem jest us≈Çuga
                            task√≥w?</li>
                        <li class="fragment">Zawo≈Çaƒá
                            <pre
                                style="margin: 0; font-size: .6em"><code class="bash" data-trim>
                                    docker-compose -f docker-compose-tools.yml -f docker-compose-apps.yml up --scale tasks=3 -d</code></pre>
                        </li>
                    </ol>
                </section>
            </section>
            <section data-background-image="" data-transition="zoom">
                <section data-transition="zoom">
                    <h2>PowiƒÖzane, pomocne</h2>
                    <ul>
                        <li><a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a></li>
                        <li><a href="https://docs.docker.com/compose/extends/">docker-compose</a></li>
                    </ul>
                </section>
            </section>
            <section data-background-image="img/bg-hd.jpg" data-background-transition="zoom">
                <ul class="about-me">
                    <li>
                        <ul style="padding: 0">
                            <li>
                                <a href="https://www.linkedin.com/in/mateusz-chrzonstowski/">
                                    <i class="fab fa-linkedin"
                                        style="color: #0077B5; background-color: #FFF; line-height: .75em"></i>
                                    /mateusz-chrzonstowski
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/_mat3e_">
                                    <i class="fab fa-twitter-square"
                                        style="background-color: #1DA1F2; color: #FFF; line-height: .75em"></i>
                                    /_mat3e_
                                </a>
                            </li>
                            <li>
                                <a href="https://www.reddit.com/user/_mat3e_">
                                    <i class="fab fa-reddit-square"
                                        style="background-color: #FF4500; color: #FFF; line-height: .75em"></i>
                                    /_mat3e_
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/mat3e/">
                                    <i class="fab fa-github-square"
                                        style="color: #24292E; background-color: #FFF; line-height: .75em"></i>
                                    /mat3e
                                </a>
                            </li>
                            <li style="line-height: 1">&nbsp;</li>
                            <li style="line-height: .75">
                                <a style="font-size: .7em; font-weight: bold;"
                                    href="https://mat3e.github.io/microservices-workshop/gigacon.html">
                                    mat3e.github.io
                                    <div style="padding-left: .5em;">
                                        /microservices-workshop/gigacon
                                    </div>
                                </a>
                            </li>
                            <li style="line-height: 1">&nbsp;</li>
                        </ul>
                    </li>
                    <li>
                        <ul style="padding: .1em; line-height: 1">
                            <li>
                                <a href="https://www.udemy.com/fajny-javascript/?couponCode=OPENALL">
                                    <img src="img/udemy.svg" class="pure-img" style="height: 1.5em;">
                                </a>
                            </li>
                            <li>
                                <a href="https://allegro.tech/about-us/">
                                    <img src="img/allegro-tech.svg" class="pure-img" style="height: 1.5em;">
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </section>
        </div>
    </div>
    <script src="js/reflect.js"></script>
    <script src="js/zone.js"></script>
    <script src="js/rxjs.js"></script>
    <script src="js/ang-core.js"></script>
    <script src="js/ang-common.js"></script>
    <script src="js/ang-compiler.js"></script>
    <script src="js/ang-platform.js"></script>
    <script src="js/ang-platform-dynamic.js"></script>
    <script src="js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script src="js/babel.min.js"></script>
    <script>
        const controls = (function () {
            Reveal.initialize({
                history: true,
                // - null: Media will only autoplay if data-autoplay is present
                autoPlayMedia: null,
                transition: 'slide', // none/fade/slide/convex/concave/zoom
                transitionSpeed: 'default', // default/fast/slow
                backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
                dependencies: [
                    {
                        src: 'js/classList.js', condition: function () {
                            return !document.body.classList;
                        }
                    },

                    {
                        src: 'js/marked.js', condition: function () {
                            return !!document.querySelector('[data-markdown]');
                        }
                    },
                    {
                        src: 'js/markdown.js', condition: function () {
                            return !!document.querySelector('[data-markdown]');
                        }
                    },

                    // Syntax highlight for <code> elements
                    {
                        src: 'js/highlight.js', callback: function () {
                            setTimeout(() => hljs.initHighlightingOnLoad(), 0);
                        }
                    },

                    // Zoom in and out with Alt+click
                    { src: 'js/zoom.js' },

                    { src: 'notes/notes.js' },

                    { src: 'js/math.js' }
                ]
            });

            document.querySelectorAll('.reveal .slides section:not([data-background-image])').forEach(s => {
                s.setAttribute('data-background-image', 'img/twitter.png');
                s.setAttribute('data-background-size', '240px');
                s.setAttribute('data-background-position', '20px 20px');
            });

            return {
                evalCode(btn) {
                    eval(extractCodeFromBefore(btn));
                },
                evalTsCode(btn, once) {
                    const input = extractCodeFromBefore(btn);
                    const output = Babel.transform(input, {
                        plugins: [
                            ['transform-modules-umd', {
                                globals: {
                                    '@angular/core': 'ng.core',
                                    '@angular/platform-browser': 'ng.platformBrowser',
                                    '@angular/platform-browser-dynamic': 'ng.platformBrowserDynamic',
                                    'zone.js': 'Zone',
                                    'core-js/es/reflect': 'coreJs',
                                    'core-js/features/reflect': 'coreJs'
                                },
                                exactGlobals: true
                            }],
                            'transform-typescript',
                            ['proposal-decorators', { legacy: true }],
                            ['proposal-class-properties', { loose: true }]
                        ]
                    }).code;
                    eval.call(window, output);
                    if (once) {
                        btn.disabled = true;
                    }
                }
            }

            function extractCodeFromBefore(btn) {
                return [...btn.parentElement.querySelectorAll('pre')].filter(e => getComputedStyle(e).display !== 'none')[0].innerText;
            }
        })();
    </script>
</body>

</html>